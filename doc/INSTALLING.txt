Please follow the steps here exactly. If you don't, you may be left with 
an unbootable machine (although 'Last known good configuration' should 
make it bootable again). 

1. Copy the driver files that you built by following the BUILDING.txt 
steps (or that you got from a binary dist), so that on your testing 
machine the tree looks like this: 

Xen\install.bat
Xen\ShutdownMon.exe
Xen\<os>\xenhide.inf
Xen\<os>\xenpci.inf
Xen\<os>\xenvbd.inf
Xen\<os>\DPInst.exe
Xen\<os>\<arch>\xenaddresource.sys
Xen\<os>\<arch>\xenhide.sys 
Xen\<os>\<arch>\xenpci.sys
Xen\<os>\<arch>\xenvbd.sys 
Xen\<os>\<arch>\WdfCoInstaller01005.dll
(If you have compiled yourself, you'll need to copy
WdfCoInstaller01007.dll and DPInst.exe from the redist folder in the DDK) (<os> is
winxp for XP, or winnet for 2K3. <arch> is i386 or amd64)

2. run 'install.bat' in the Xen directory

3. Click Next and Ok when prompted. The drivers are unsigned so be prepared to do
this more than once.

4. Reboot when prompted to ensure that your computer still boots without any
issues. You'll now have two ethernet interfaces, which may or may not cause
problems.

5. edit your boot.ini to look something like this: 

"
[boot loader]
timeout=30 
default=multi(0)disk(0)rdisk(0)partition(1)\WINDOWS

[operating systems] 
multi(0)disk(0)rdisk(0)partition(1)\WINDOWS="Windows Server 2003, Enterprise" /noexecute=optout /fastdetect 
multi(0)disk(0)rdisk(0)partition(1)\WINDOWS="Windows Server 2003, Enterprise, GPLPV" /noexecute=optout /fastdetect /gplpv
" 

17. The main thing in the above step is that you have a line with /gplpv 
on the end. This tells the PV device (vbd, vif) drivers to activate,
otherwise they will pretty much sit silent. At the moment, vif always
activates.

18. Reboot and select the /gplpv entry. If it doesn't work then email me 
(james.harper@bendigoit.com.au) with some details and i'll see what I can
do. 

Without the /gplpv option specified, the xenvbd driver will only pick up 
on devices you have added since boot, so you can still test it without 
specifying /gplpv and doing something like the following in Dom0: 

"
xm block-attach mywindowsdomain phy:/dev/someblockdevice /dev/hdc w
" 

You need to specify the 'phy:' in your xen config file and in the
block-attach line otherwise the backend doesn't seem to publish the block
and sector sizes correctly. 

If you do the block-attach, then your block device should show up under 
windows, and you can partition it etc. 
